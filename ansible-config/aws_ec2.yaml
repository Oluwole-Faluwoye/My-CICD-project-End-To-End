plugin: amazon.aws.aws_ec2

regions:
  - us-east-1
  - us-east-2

# Fetch all running Tomcat instances (no static environment filter)
filters:
  "tag:Role": "Tomcat"
  "instance-state-name": "running"

# Group hosts by Environment tag
keyed_groups:
  - key: tags.Environment
    prefix: tag_Environment_

# Use private IPs for Ansible connections
hostnames:
  - private-ip-address
compose:
  ansible_host: private_ip_address
